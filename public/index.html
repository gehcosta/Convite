<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Supabase Insert Example</title>
</head>
<body>
<h1>Inserir Nome na Tabela Pessoas</h1>

<label for="nome">Nome:</label>
<input type="text" id="nome" placeholder="Digite um nome">
<button id="insertData">Inserir Nome</button>

<div id="output"></div>

<script>
  // URL da sua instância do Supabase
  const supabaseUrl = 'https://hduudutiepinkxrajqofh.supabase.co'; // Substitua pela sua URL do Supabase
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhkdWR1ZHRpZXBpbmJ4cmFqb2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ3MzI1NDUsImV4cCI6MjA1MDMwODU0NX0.y3NB_yi95Xz5kx_-BVo8alKon16vmxu8m8w5uSqRQlI'; // Sua chave de API
  const tableName = 'pessoas'; // Nome da tabela

  // Função para inserir dados na tabela "pessoas"
  document.getElementById('insertData').addEventListener('click', () => {
    const nome = document.getElementById('nome').value;

    if (!nome) {
      alert('Por favor, insira um nome.');
      return;
    }

    // Requisição para inserir o nome na tabela
    fetch(`${supabaseUrl}/rest/v1/${tableName}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'apikey': supabaseKey,  // Chave de API
        'Authorization': `Bearer ${supabaseKey}`,  // Usando o Bearer token com a chave
        'Prefer': 'return=representation'  // Para retornar o dado inserido
      },
      body: JSON.stringify([{ nome: nome }])  // Estrutura do dado a ser inserido
    })
            .then(response => response.json())
            .then(data => {
              console.log(data);
              document.getElementById('output').innerText = `Nome inserido: ${data[0].nome}`;
            })
            .catch(error => {
              console.error('Erro:', error);
              document.getElementById('output').innerText = 'Erro ao inserir nome';
            });
  });
</script>
</body>
</html>
